# YYModel

<http://699pic.com/tupian-400116681.html>

## YYModelPropertyMeta

```objc
@interface _YYModelPropertyMeta : NSObject {
    @package
    NSString *_name;             ///< property's name, 属性名称
    YYEncodingType _type;        ///< property's type, 属性类型, OC类型解析为YYEncodingTypeObject
    YYEncodingNSType _nsType;    ///< property's Foundation type, 属性在Foundation框架中的类型
    BOOL _isCNumber;             ///< is c number type, 是否是CNumber
    Class _cls;                  ///< property's class, or nil, 属性类
    Class _genericCls;           ///< container's generic class, or nil if threr's no generic class,如果是容器类型, 就是容器内元素的类型(NSArray中存放的item类型)
    SEL _getter;                 ///< getter, or nil if the instances cannot respond, getter方法
    SEL _setter;                 ///< setter, or nil if the instances cannot respond, setter方法
    BOOL _isKVCCompatible;       ///< YES if it can access with key-value coding, 是否支持KVC
    BOOL _isStructAvailableForKeyedArchiver; ///< YES if the struct can encoded with keyed archiver/unarchiver, 结构体是否支持归档/解档
    BOOL _hasCustomClassFromDictionary; ///< class/generic class implements +modelCustomClassForDictionary:, 是否实现modelCustomClassForDictionary:方法, 将字典解析成不同类型
    
    /*
     property->key:       _mappedToKey:key     _mappedToKeyPath:nil            _mappedToKeyArray:nil
     property->keyPath:   _mappedToKey:keyPath _mappedToKeyPath:keyPath(array) _mappedToKeyArray:nil
     property->keys:      _mappedToKey:keys[0] _mappedToKeyPath:nil/keyPath    _mappedToKeyArray:keys(array)
     */
    NSString *_mappedToKey;      ///< the key mapped to, 映射key json中的key
    NSArray *_mappedToKeyPath;   ///< the key path mapped to (nil if the name is not key path), 映射keyPath
    NSArray *_mappedToKeyArray;  ///< the key(NSString) or keyPath(NSArray) array (nil if not mapped to multiple keys), 映射的key/keyPath数组, 如果没有就为nil
    YYClassPropertyInfo *_info;  ///< property's info, 属性信息
    _YYModelPropertyMeta *_next; ///< next meta if there are multiple properties mapped to the same key. 如果多个属性映射到同一个key, next就指向下一个模型属性元
}
@end
```





## YYModelMeta

```objc
@interface _YYModelMeta : NSObject {
    @package
    // runtime类信息
    YYClassInfo *_classInfo;
    /// Key:mapped key and key path, Value:_YYModelPropertyMeta.
    NSDictionary *_mapper;
    /// Array<_YYModelPropertyMeta>, all property meta of this model.
    /// array<YYModelPropertyMeta> 当前模型的所有propertyMeta数组
    NSArray *_allPropertyMetas;
    /// Array<_YYModelPropertyMeta>, property meta which is mapped to a key path.
    NSArray *_keyPathPropertyMetas;
    /// Array<_YYModelPropertyMeta>, property meta which is mapped to multi keys.
    /// 被映射到多个key的_YYModelPropertyMeta数组
    NSArray *_multiKeysPropertyMetas;
    /// The number of mapped key (and key path), same to _mapper.count.
    /// 映射key的数量, =_mapper.count
    NSUInteger _keyMappedCount;
    /// Model class type. 模型cls类型
    YYEncodingNSType _nsType;
    
    BOOL _hasCustomWillTransformFromDictionary;
    BOOL _hasCustomTransformFromDictionary;
    BOOL _hasCustomTransformToDictionary;
    BOOL _hasCustomClassFromDictionary;
}
@end
```



```
// NS类型
NSString
NSNumber
NSData
NSDate
NSValue
NSURL
NSArray
NSDictionary
NSSet
```





## 思考

1. hash
2. 什么类型不能使用KVC?
3. NSType哪些类型
4. 什么类型是CNumber类型
5. 类型之间的转换 string->date
6. 获取NSBlock类型的技巧
7. 遍历字典和数组的性能 方法